import{_ as j}from"./FieldBase-DLGpD4hD.js";import{g as _,o,d as c,B as u,l as w,aP as D,u as l,ag as G,a as b,t as F,c as m,j as h,G as k,W as B}from"./main-DL69bNQp.js";import{r as L,v as P,s as R}from"./dropdown-menu-BGEQdedM.js";import{u as C}from"./FormBase-C6kPN3Yp.js";import{u as z}from"./field-DmbitoM2.js";import"./Loading-D04WBFpf.js";import"./event-BB_Ol6Sd.js";import"./vnode-5kGHyP17.js";import"./isString-BYZQ6BTf.js";import"./card-Dfi-AynD.js";const K={class:"flex justify-between"},T={key:0,class:"opacity-50"},Z={__name:"groupSelectField",props:{formId:String,data:Object,path:String},setup(i){var y;const e=i,r=_(!1),f=C(e.formId),g=z(e),p=g.value(),s=_([]),O=e.data.valueField||"value",V=e.data.labelField||"label";if(console.log("initializing the group select field",e.data.id),Array.isArray(e.data.options))s.value=e.data.options,r.value=!0;else if(!((y=e.data.props)!=null&&y.remote)){let t=f.remoteData.get(e.data.options);Array.isArray(t)?(s.value=v(t),r.value=!0,console.log("group options are ready",e.data.id)):(console.log("group options are NOT ready",e.data.id),Invicta.on(e.data.options,()=>{s.value=v(f.remoteData.get(e.data.options)),r.value=!0,console.log("group options are FINALLY ready",e.data.id)}))}function v(t){return e.data.hasOwnProperty("filterBy")?t.filter(d=>e.data.filterBy.includes(d.handle)):t}function I(){Invicta.fetch.get(e.data.options).then(t=>{s.value=t,r.value=!0})}return(t,d)=>{const A=L,N=P,S=R,x=j;return o(),c(x,{"form-id":i.formId,"field-props":e},{default:u(()=>[w(S,D({modelValue:l(p),"onUpdate:modelValue":d[0]||(d[0]=a=>G(p)?p.value=a:null)},i.data.props,{"value-key":i.data.valueKey||null,teleported:!1,"remote-method":I,disabled:l(g).disabled}),{label:u(({label:a,value:n})=>[b("div",K,[b("span",null,F(a),1),n.group?(o(),m("span",T,F(n.group),1)):h("",!0)])]),default:u(()=>[l(r)?(o(!0),m(k,{key:0},B(l(s),a=>(o(),c(N,{key:a.label,label:a.label},{default:u(()=>[(o(!0),m(k,null,B(a.options,(n,E)=>(o(),c(A,{key:E,value:n[l(O)],label:n[l(V)]},null,8,["value","label"]))),128))]),_:2},1032,["label"]))),128)):h("",!0)]),_:1},16,["modelValue","value-key","disabled"])]),_:1},8,["form-id","field-props"])}}};export{Z as default};

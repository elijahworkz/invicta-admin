import{_ as B}from"./FieldBase-DLGpD4hD.js";import{g as $,w as g,o as u,d as F,B as f,a as e,t as c,c as _,G as S,W as U,u as h,i as k,c5 as v,l as y,cG as x,F as C,U as L}from"./main-DL69bNQp.js";import{u as N}from"./field-DmbitoM2.js";import{i as O}from"./isString-BYZQ6BTf.js";import{m as D}from"./dropdown-menu-BGEQdedM.js";import"./FormBase-C6kPN3Yp.js";import"./Loading-D04WBFpf.js";import"./event-BB_Ol6Sd.js";import"./card-Dfi-AynD.js";import"./vnode-5kGHyP17.js";const E={class:"keyValue-table"},G={colspan:"2"},I={class:"w-1/4"},R=["name","onUpdate:modelValue"],T=["name","onUpdate:modelValue"],j={class:"action"},A={class:"mt-3"},Z={__name:"keyValueField",props:{formId:String,data:Object,path:String},setup(a){const m=a,p=N(m).value({}),o=$(V(p.value));g(()=>o.value,(t,r)=>{p.value=t.reduce((l,n)=>(l[n.key]=n.value,l),{})},{deep:!0});function V(t){return O(t)&&(t=JSON.parse(t)),D(Object.entries(t),([r,l])=>({key:`${r}`,value:l}))}function b(){let t={key:"",value:""};o.value.push(t)}function w(t){o.value.splice(t,1)}return(t,r)=>{const l=L,n=B;return u(),F(n,{"form-id":a.formId,"field-props":m},{default:f(()=>[e("table",E,[e("thead",null,[e("tr",null,[e("th",null,c(a.data.keyLabel||"Key"),1),e("th",G,c(a.data.valueLabel||"Value"),1)])]),e("tbody",null,[(u(!0),_(S,null,U(h(o),(s,i)=>(u(),_("tr",null,[e("td",I,[k(e("input",{name:`${a.data.id}-key-${i}`,"onUpdate:modelValue":d=>s.key=d},null,8,R),[[v,s.key]])]),e("td",null,[k(e("input",{name:`${a.data.id}-value-${i}`,"onUpdate:modelValue":d=>s.value=d},null,8,T),[[v,s.value]])]),e("td",j,[y(l,{text:"",onClick:d=>w(i),icon:h(x)},null,8,["onClick","icon"])])]))),256))])]),e("div",A,[y(l,{type:"primary",onClick:b},{default:f(()=>[C(c(a.data.addLabel||"Add"),1)]),_:1})])]),_:1},8,["form-id","field-props"])}}};export{Z as default};

import{_ as b}from"./FieldBase-B__KXuFD.js";import{b as i,h as k,w,o as g,d as V,B as $,l as f,aP as F,u as r,ag as B,c as E,j as I}from"./main-Gom_X7XC.js";import{w as M}from"./dropdown-menu-BVI0Wl79.js";import{u as P}from"./field-BIfiLAjy.js";import{u as Y}from"./FormBase-BhlFrBgY.js";import{E as j}from"./vnode-Cs930f0e.js";import"./Loading-C6aktGFb.js";import"./event-BB_Ol6Sd.js";import"./isString-DeC8ACer.js";import"./card-DTfKIn5u.js";const y=["innerHTML"],z={__name:"metaField",props:{formId:String,data:Object,path:String},setup(l){const e=l,o={normal:e.data.props&&e.data.props.length_normal?e.data.props.length_normal:20,max:e.data.props&&e.data.props.lengths_max?e.data.props.lengths_max:70},m=P(e),s=m.value(""),c=Y(e.formId),d=i(()=>e.data.props&&e.data.props.source?c.get(e.data.props.source):null),u=i(()=>{var a,p;const t=(a=e.data.props)!=null&&a.separator?` ${e.data.props.separator} `:" | ";return(p=e.data.props)!=null&&p.site_name?t+e.data.props.site_name:""});function _(t){c.mode=="create"&&(s.value=t+u.value)}k(()=>{var t;c.mode=="edit"&&!s.value&&(s.value=d.value?d.value+u.value:(t=e.data.props)==null?void 0:t.site_name)}),w(d,t=>{_(t)});const n=i(()=>{const t=s.value.length,a={};switch(a.percentage=Math.ceil(t*100/o.max),a.percentage=a.percentage>100?100:a.percentage,!0){case t<o.normal:a.status="warning",a.caption=`Your meta ${e.data.id} could be longer.`;break;case(t>=o.normal&&t<=o.max):a.status="success",a.caption=`Your meta ${e.data.id} is a good length.`;break;case t>o.max:a.status="exception",a.caption=`Your meta ${e.data.id} is too long, <strong>the ideal length is between ${o.normal} and ${o.max} characters.</strong>`;break}return a});return(t,a)=>{const p=j,h=M,x=b;return g(),V(x,{"form-id":l.formId,"field-props":e},{default:$(()=>[f(p,F({modelValue:r(s),"onUpdate:modelValue":a[0]||(a[0]=v=>B(s)?s.value=v:null),type:"textarea"},l.data.props,{disabled:r(m).disabled}),null,16,["modelValue","disabled"]),f(h,{class:"mt-2",percentage:r(n).percentage,"stroke-width":3,"text-inside":!0,status:r(n).status},null,8,["percentage","status"]),r(n).caption?(g(),E("span",{key:0,class:"info",innerHTML:r(n).caption},null,8,y)):I("",!0)]),_:1},8,["form-id","field-props"])}}};export{z as default};

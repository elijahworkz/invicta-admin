import{_ as A}from"./FieldBase-B__KXuFD.js";import{u as L,g as P,e as U}from"./FormBase-BhlFrBgY.js";import{u as E}from"./field-BIfiLAjy.js";import{o as l,c as w,l as v,B as u,a as m,d as h,j as k,D as S,u as n,P as q,F as D,t as F,b5 as O,R as G,U as x,cG as H,C as z,S as W,b as B,r as J,G as K,W as M}from"./main-Gom_X7XC.js";import{d as I,_ as T}from"./vuedraggable.umd-C7vMuthG.js";import{y as V}from"./dropdown-menu-BVI0Wl79.js";import"./isString-DeC8ACer.js";import"./Loading-C6aktGFb.js";import"./event-BB_Ol6Sd.js";import"./card-DTfKIn5u.js";import"./vnode-Cs930f0e.js";const Q={class:"inline-repeater-field"},X={class:"field-row flex items-center"},Y={key:0,class:"mt-3"},Z={__name:"InlineRepeater",props:{list:{type:Array,default:[],required:!0},default:{type:Object,default(e){return{}}},itemName:String,itemTitle:Function,panelClass:String,disableDraggable:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["updated"],setup(e,{emit:i}){const t=e,f=i,p=t.list.length?t.list[0]:t.default;function r(){let a=V(p),o=[...O(t.list),a];f("updated",o)}function _(a){t.list.splice(a,1),f("updated",[...t.list])}return(a,s)=>{const o=T,g=G,c=x;return l(),w("div",Q,[v(n(I),{list:e.list,handle:".handle","item-key":"index",disabled:e.disableDraggable,onUpdate:s[0]||(s[0]=d=>a.$emit("updated",e.list))},{item:u(({element:d,index:$})=>[m("div",X,[!e.disableDraggable&&!e.readOnly?(l(),h(o,{key:0,class:"handle cursor-grab opacity-50"})):k("",!0),S(a.$slots,"default",{item:d,index:$}),e.readOnly?k("",!0):(l(),h(c,{key:1,text:"",onClick:y=>_($)},{default:u(()=>[v(g,{icon:n(q),width:18},null,8,["icon"])]),_:2},1032,["onClick"]))])]),_:3},8,["list","disabled"]),e.readOnly?k("",!0):(l(),w("div",Y,[v(c,{type:"primary",onClick:r},{default:u(()=>[D("Add "+F(e.itemName),1)]),_:1})]))])}}},ee={class:"repeater-field"},te={class:"accordion inner"},ae=["name","disabled"],le={class:"ms-2 summary-text"},ie={class:"details-body"},ne={class:"flex-full text-end mt-2"},se={key:0,class:"mt-3"},de={__name:"CollapseRepeater",props:{list:{type:Array,default:[],required:!0},default:{type:Object,default(e){return{}}},itemName:{type:String,default:"row"},itemTitle:{type:Function,default(e,i){return"Empty"}},panelClass:{type:String,default:""},disableDraggable:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["updated"],setup(e,{emit:i}){const t=e,f=i,p=t.list.length?t.list[0]:t.default;function r(){let a=V(p),o=[...O(t.list),a];f("updated",o)}function _(a){t.list.splice(a,1)}return(a,s)=>{const o=T,g=x;return l(),w("div",ee,[m("div",te,[v(n(I),{list:e.list,handle:".drag-handle","item-key":"index",disabled:e.disableDraggable,onUpdate:s[0]||(s[0]=c=>a.$emit("updated",e.list))},{item:u(({element:c,index:d})=>[m("details",{name:`item-${d}`,disabled:e.readOnly},[m("summary",null,[e.disableDraggable?k("",!0):(l(),h(o,{key:0})),m("span",le,F(e.itemTitle(c,d)),1),e.readOnly?k("",!0):(l(),h(g,{key:1,type:"danger",text:"",icon:n(H),onClick:$=>_(d)},null,8,["icon","onClick"]))]),m("div",ie,[m("div",{class:z(e.panelClass)},[S(a.$slots,"default",{item:c,index:d}),m("div",ne,[v(g,{type:"danger",text:"",onClick:$=>_(d),icon:n(W)},{default:u(()=>[D(" Remove "+F(e.itemName),1)]),_:2},1032,["onClick","icon"])])],2)])],8,ae)]),_:3},8,["list","disabled"])]),e.readOnly?k("",!0):(l(),w("div",se,[v(g,{type:"primary",onClick:r},{default:u(()=>[D("Add "+F(e.itemName),1)]),_:1})]))])}}},_e={__name:"repeaterField",props:{formId:String,data:Object,path:String},setup(e){const i=e,{data:t,path:f}=i,p=L(i.formId),r=E(i),_=B(()=>r.get("inline",!1)?Z:de),a=!r.get("draggable",!0),s=B(()=>P(t.fields)),o=B(()=>p.get(i.path,[s.value])),g=r.get("itemName","row");function c(y,b){let C="titleField"in t?t.titleField:"title",R=[f,b,C];return p.get(R.join("."),`${C} #${b}`)}const d=(y,b)=>`${f}.${b}.${y}`;function $(y){let b=[...O(y)];p.set(i.path,b)}return(y,b)=>{const C=U,R=A;return l(),h(R,{"form-id":e.formId,"field-props":i},{default:u(()=>[(l(),h(J(n(_)),{list:n(o),"item-name":n(g),"item-title":c,"default-row":n(s),"disable-draggable":a,"read-only":n(r).disabled,"panel-class":"group",onUpdated:$},{default:u(j=>[(l(!0),w(K,null,M(n(t).fields,N=>(l(),h(C,{"form-id":e.formId,"field-data":N,"data-path":d(N.id,j.index)},null,8,["form-id","field-data","data-path"]))),256))]),_:1},40,["list","item-name","default-row","read-only"]))]),_:1},8,["form-id","field-props"])}}};export{_e as default};

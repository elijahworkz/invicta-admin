import{_ as A}from"./FieldBase-C1vwZiP-.js";import{u as L,g as P,e as U}from"./FormBase-DkHSOPic.js";import{u as E}from"./field-CM4s8khd.js";import{o as n,c as w,l as $,B as p,a as f,d as _,j as v,D as S,u as l,P as q,F as D,t as F,b5 as O,R as G,U as x,cG as H,C as z,S as M,b as B,r as W,G as J,W as K}from"./main-BJwVETGf.js";import{d as I,_ as T}from"./vuedraggable.umd-D-KFcVG4.js";import{y as V}from"./dropdown-menu-DAcU7FF3.js";import"./isString-CHWLzZBl.js";import"./Loading-D1Lv43VD.js";import"./event-BB_Ol6Sd.js";import"./card-CwGL954t.js";import"./vnode-DdpkOOyG.js";const Q={class:"inline-repeater-field"},X={class:"field-row flex items-center"},Y={key:0,class:"mt-3"},Z={__name:"InlineRepeater",props:{list:{type:Array,default:[],required:!0},default:{type:Object,default(e){return{}}},itemName:String,itemTitle:Function,panelClass:String,disableDraggable:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["updated"],setup(e,{emit:i}){const t=e,g=i,y=t.list.length?t.list[0]:t.default;function c(){let s=V(y),o=[...O(t.list),s];g("updated",o)}function k(s){t.list.splice(s,1),g("updated",[...t.list])}return(s,a)=>{const o=T,b=G,m=x;return n(),w("div",Q,[$(l(I),{list:e.list,handle:".handle","item-key":"index",disabled:e.disableDraggable,onUpdate:a[0]||(a[0]=u=>s.$emit("updated",e.list))},{item:p(({element:u,index:d})=>[f("div",X,[!e.disableDraggable&&!e.readOnly?(n(),_(o,{key:0,class:"handle cursor-grab opacity-50"})):v("",!0),S(s.$slots,"default",{item:u,index:d}),e.readOnly?v("",!0):(n(),_(m,{key:1,text:"",onClick:r=>k(d)},{default:p(()=>[$(b,{icon:l(q),width:18},null,8,["icon"])]),_:2},1032,["onClick"]))])]),_:3},8,["list","disabled"]),e.readOnly?v("",!0):(n(),w("div",Y,[$(m,{type:"primary",onClick:c},{default:p(()=>[D("Add "+F(e.itemName),1)]),_:1})]))])}}},ee={class:"repeater-field"},te={class:"accordion inner"},ae=["name","disabled"],le={class:"ms-2 summary-text"},ne={class:"details-body"},ie={class:"flex-full text-end mt-2"},se={key:0,class:"mt-3"},de={__name:"CollapseRepeater",props:{list:{type:Array,default:[],required:!0},default:{type:Object,default(e){return{}}},itemName:{type:String,default:"row"},itemTitle:{type:Function,default(e,i){return"Empty"}},panelClass:{type:String,default:""},disableDraggable:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["updated"],setup(e,{emit:i}){const t=e,g=Math.random().toString(36).substring(2,15),y=i,c=t.list.length?t.list[0]:t.default;function k(){let a=V(c),b=[...O(t.list),a];y("updated",b)}function s(a){t.list.splice(a,1)}return(a,o)=>{const b=T,m=x;return n(),w("div",ee,[f("div",te,[$(l(I),{list:e.list,handle:".drag-handle","item-key":"index",disabled:e.disableDraggable,onUpdate:o[0]||(o[0]=u=>a.$emit("updated",e.list))},{item:p(({element:u,index:d})=>[f("details",{name:`${l(g)}-item-${d}`,disabled:e.readOnly},[f("summary",null,[e.disableDraggable?v("",!0):(n(),_(b,{key:0})),f("span",le,F(e.itemTitle(u,d)),1),e.readOnly?v("",!0):(n(),_(m,{key:1,type:"danger",text:"",icon:l(H),onClick:r=>s(d)},null,8,["icon","onClick"]))]),f("div",ne,[f("div",{class:z(e.panelClass)},[S(a.$slots,"default",{item:u,index:d}),f("div",ie,[$(m,{type:"danger",text:"",onClick:r=>s(d),icon:l(M)},{default:p(()=>[D(" Remove "+F(e.itemName),1)]),_:2},1032,["onClick","icon"])])],2)])],8,ae)]),_:3},8,["list","disabled"])]),e.readOnly?v("",!0):(n(),w("div",se,[$(m,{type:"primary",onClick:k},{default:p(()=>[D("Add "+F(e.itemName),1)]),_:1})]))])}}},_e={__name:"repeaterField",props:{formId:String,data:Object,path:String},setup(e){const i=e,{data:t,path:g}=i,y=L(i.formId),c=E(i),k=B(()=>c.get("inline",!1)?Z:de),s=!c.get("draggable",!0),a=B(()=>P(t.fields)),o=B(()=>y.get(i.path,[a.value])),b=c.get("itemName","row");function m(r,h){let C="titleField"in t?t.titleField:"title",R=[g,h,C];return y.get(R.join("."),`${C} #${h}`)}const u=(r,h)=>`${g}.${h}.${r}`;function d(r){let h=[...O(r)];y.set(i.path,h)}return(r,h)=>{const C=U,R=A;return n(),_(R,{"form-id":e.formId,"field-props":i},{default:p(()=>[(n(),_(W(l(k)),{list:l(o),"item-name":l(b),"item-title":m,"default-row":l(a),"disable-draggable":s,"read-only":l(c).disabled,"panel-class":"group",onUpdated:d},{default:p(j=>[(n(!0),w(J,null,K(l(t).fields,N=>(n(),_(C,{"form-id":e.formId,"field-data":N,"data-path":u(N.id,j.index)},null,8,["form-id","field-data","data-path"]))),256))]),_:1},40,["list","item-name","default-row","read-only"]))]),_:1},8,["form-id","field-props"])}}};export{_e as default};

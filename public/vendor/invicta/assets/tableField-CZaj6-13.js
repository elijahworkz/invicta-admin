import{g as p,h as F,o as a,c,u as e,d as i,j as n,l as g,i as S,a as u,F as x,t as U}from"./main-Gom_X7XC.js";import{v as z}from"./loading-CR7m-vIa.js";import{z as P,n as j,p as B,o as $,k as w,q as N}from"./dropdown-menu-BVI0Wl79.js";import{_ as R}from"./Loading-C6aktGFb.js";import"./vnode-Cs930f0e.js";import"./event-BB_Ol6Sd.js";const V={class:"mb-2"},D={key:0,class:"flex items-center justify-between"},T={key:1,class:"my-3"},E={key:2,class:"flex items-center justify-center h-full py-10"},I={class:"flex items-center justify-between p-3 mt-2"},G={__name:"tableField",props:{formId:String,data:Object,path:String},setup(l){const r=l,o=p(!1),s=p(),t=P(r.data.id);return F(()=>{o.value=!0,Invicta.fetch.get(r.data.resourceUrl,{params:{settings:!0}}).then(({data:d})=>{t.initForm(r.data.resourceUrl,d),s.value=d,o.value=!1,r.data.searchFilter&&t.getResourceFilters(t.static.settings.handle)})}),(d,m)=>{const f=j,_=B,h=$,v=R,y=w,b=N,k=z;return a(),c("div",V,[e(s)&&l.data.searchFilter?(a(),c("div",D,[(a(),i(f,{size:"default",class:"max-w-sm",currentSearch:e(s).meta.search,key:e(t).static.settings.handle,onUpdate:e(t).setSearch},null,8,["currentSearch","onUpdate"])),e(t).static.filters?(a(),i(_,{key:0,"resource-handle":e(t).static.settings.handle,filters:e(t).static.filters,"active-filters":e(t).data.activeFilters},null,8,["resource-handle","filters","active-filters"])):n("",!0)])):n("",!0),e(o)?n("",!0):(a(),c("div",T,[g(h,{badges:e(t).data.filterBadges},null,8,["badges"])])),e(o)?(a(),c("div",E,[g(v)])):e(s)?S((a(),i(y,{key:l.data.id,"resource-handle":e(t).static.settings.handle,data:e(t).data.resourceData,"table-props":e(t).static.settings.table,columns:e(t).static.settings.columns,"columns-select":!1,"can-edit":!1,"can-delete":!1,"has-detail":!1,"no-select":!0},null,8,["resource-handle","data","table-props","columns"])),[[k,e(t).data.loading]]):n("",!0),u("div",I,[u("div",null,[m[0]||(m[0]=x("Total: ",-1)),u("strong",null,U(e(t).data.total),1)]),e(s)&&e(s).meta.last_page>1?(a(),i(b,{key:0,background:"",small:"",layout:"prev, pager, next, jumper","current-page":e(t).data.currentPage,"page-size":e(t).data.perPage,"pager-count":5,total:e(t).data.total,"onUpdate:pageSize":e(t).setPageSize,"onUpdate:currentPage":e(t).setPage},null,8,["current-page","page-size","total","onUpdate:pageSize","onUpdate:currentPage"])):n("",!0)])])}}};export{G as default};

import{_ as x}from"./FieldBase-DWvTZj_s.js";import{b as I,g as C,h as F,o as n,d as B,B as h,c as p,G as V,W as P,u as l,C as _,a as d,t as S,aD as $,l as v,eY as w,j as M,R as N,aQ as j}from"./main-Cb0PFlp0.js";import{u as D}from"./FormBase-DaTWT1Gg.js";import{u as E}from"./field-B2jNcHaR.js";import"./dropdown-menu-CgCmB9xa.js";import"./Loading-CcbqUtbb.js";import"./event-BB_Ol6Sd.js";import"./vnode-Jytc64K1.js";import"./isString-DdWyWSbS.js";import"./card-B08ajyLB.js";const L=["value","id","checked"],O=["for"],R=["onClick"],Z={__name:"termsField",props:{formId:String,data:Object,path:String},setup(u){const r=u,c=D(r.formId),o=E(r).value([]),i=I(()=>o.value.map(t=>t.id)),k=t=>{let e=parseInt(t.target.value);o.value.length||(o.value=[]),i.value.includes(e)?o.value=o.value.filter(s=>s.id!==e):(console.log("we should push here"),o.value.push({id:e,pivot:{primary:0}}))},m=t=>{let e=o.value.filter(s=>s.id==t)[0];return e?e.pivot.primary==1:!1},g=t=>{o.value=o.value.map(s=>(s.pivot.primary=s.id==t?1:0,s));let e={resource:c.settings.handle,resource_id:c.settings.id,related:r.data.id,term_id:t,sync:[...i.value]};Invicta.fetch.post(r.data.options,e)},f=C();return F(()=>{let t=c.settings.handle;Invicta.fetch.get(r.data.options,{params:{resource:t,locale:c.settings.currentLocale}}).then(({data:e})=>{console.log("I got this for categories",e),f.value=e})}),(t,e)=>{const s=N,y=j,b=x;return n(),B(b,{"form-id":u.formId,"field-props":r,class:"checkbox-group stacked"},{default:h(()=>[(n(!0),p(V,null,P(l(f),(a,G)=>(n(),p("label",{class:_(["el-checkbox el-checkbox--large !mx-0",{"is-checked":l(i).includes(a.id),primary:m(a.id)}])},[d("span",{class:_(["el-checkbox__input",{"is-checked":l(i).includes(a.id)}])},[d("input",{class:"el-checkbox__original",type:"checkbox",value:a.id,id:`term-${a.id}`,checked:l(i).includes(a.id),onChange:k},null,40,L),e[0]||(e[0]=d("span",{class:"el-checkbox__inner"},null,-1))],2),d("label",{for:`term-${a.id}`,class:"el-checkbox__label"},S(a.title),9,O),u.data.hasPrimary&&l(i).includes(a.id)&&l(c).settings.mode==="edit"?(n(),p("span",{key:0,class:"ml-auto make-primary",onClick:$(Q=>g(a.id),["prevent"])},[v(y,{content:m(a.id)?"Primary":"Make Primary",placement:"left"},{default:h(()=>[v(s,{icon:l(w),width:16,class:"action-icon"},null,8,["icon"])]),_:2},1032,["content"])],8,R)):M("",!0)],2))),256))]),_:1},8,["form-id","field-props"])}}};export{Z as default};
